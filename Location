ruleset Location {
  meta {
    name "LocationData"
    //b505204x3
    description <<
     Location Data
    >>
    author ""
    logging off
    use module a169x701 alias CloudRain
    use module a41x186  alias SquareTag
    
    provides getLocation

  }
  dispatch {
    }
  global {
  
      getLocation = function(key){
          ent:map.pick(key);
      }
      
    }
  
  rule add_location_item{
    select when pds:new_location_data
    pre{
        key = event:attr("key");
        value = event:attr("value");
        map = {};
        map.put([key] ,value);
    	}
    always {
        set ent:locationData map; 
    }
  }

}
